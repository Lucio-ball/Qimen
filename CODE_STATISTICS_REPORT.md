# 奇门遁甲工作台项目代码统计报告

## 代码统计概述

根据对项目各模块的详细统计，以下是有效代码量的完整分析：

## 1. 核心业务代码 (core/)

| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `paipan_engine.py` | 697 | 排盘核心算法引擎 |
| `models.py` | 427 | 数据模型定义 |
| `config_manager.py` | 388 | 配置管理系统 |
| `data_manager.py` | 303 | 数据持久化管理 |
| `workspace_manager.py` | 198 | 工作区文件管理 |
| `calendar_utils.py` | 62 | 日历工具函数 |

**核心模块小计: 2,075 行**

## 2. 用户界面代码 (ui/)

### 2.1 主窗口模块 (ui/windows/)
| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `integrated_main_window.py` | 1,294 | 集成主窗口 |
| `main_window.py` | 95 | 基础主窗口 |

**窗口模块小计: 1,389 行**

### 2.2 自定义控件 (ui/widgets/)
| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `annotation_panel_widget.py` | 1,169 | 标注面板控件 |
| `chart_widget.py` | 870 | 排盘图表控件 |
| `case_browser_widget.py` | 606 | 案例浏览器 |
| `query_widget.py` | 568 | 查询输入控件 |
| `parameter_widget.py` | 462 | 参数设置控件 |
| `palace_widget.py` | 373 | 宫位显示控件 |
| `attribute_panel_widget.py` | 219 | 属性面板控件 |
| `central_widget.py` | 198 | 中央控件 |
| `welcome_widget.py` | 127 | 欢迎页控件 |

**控件模块小计: 4,592 行**

### 2.3 对话框模块 (ui/dialogs/)
| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `preferences_pages.py` | 658 | 首选项页面 |
| `template_manager_dialog.py` | 483 | 模板管理对话框 |
| `case_info_dialog.py` | 315 | 案例信息对话框 |
| `preferences_dialog.py` | 305 | 首选项对话框 |
| `annotation_dialog.py` | 258 | 标注编辑对话框 |
| `query_dialog.py` | 200 | 查询对话框 |

**对话框模块小计: 2,219 行**

### 2.4 UI基础模块
| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `config.py` | 76 | UI配置 |
| `app_integrated.py` | 52 | 集成应用入口 |
| `app.py` | 26 | 基础应用入口 |

**UI基础模块小计: 154 行**

## 3. 应用程序入口

| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `run_gui.py` | 19 | 主程序启动器 |

## 4. 配置和数据文件

| 文件名 | 行数 | 功能描述 |
|--------|------|----------|
| `data/core_parameters.json` | 675 | 核心参数配置 |
| `data/templates.json` | 142 | 模板数据 |
| `ui/assets/styles/dark_theme.qss` | 1 | 深色主题样式 |
| `ui/views/main_window.ui` | 56 | UI界面定义 |

**配置文件小计: 874 行**

## 5. 代码量汇总

### Python 代码统计
```
核心业务逻辑:    2,075 行 (19.8%)
UI 窗口模块:     1,389 行 (13.3%)
UI 控件模块:     4,592 行 (43.9%)
UI 对话框模块:   2,219 行 (21.2%)
UI 基础模块:       154 行 (1.5%)
应用程序入口:       19 行 (0.2%)
---------------------------
Python代码总计:  10,448 行
```

### 配置文件统计
```
JSON配置文件:      817 行
QSS样式文件:         1 行
UI界面文件:         56 行
---------------------------
配置文件总计:      874 行
```

## 6. 总体代码量

**项目有效代码总量: 11,322 行**

### 代码结构分析
- **核心算法占比**: 19.8% (2,075行) - 排盘引擎和业务逻辑
- **用户界面占比**: 78.7% (8,354行) - 完整的桌面GUI应用
- **配置数据占比**: 1.5% (874行) - 参数配置和模板数据

## 7. 代码质量指标

### 模块复杂度
- **高复杂度模块**: 
  - `ui/widgets/annotation_panel_widget.py` (1,169行)
  - `ui/windows/integrated_main_window.py` (1,294行)
  - `ui/widgets/chart_widget.py` (870行)

- **核心算法模块**:
  - `core/paipan_engine.py` (697行) - 奇门遁甲核心算法

### 功能完整度
- ✅ 完整的排盘算法实现
- ✅ 丰富的用户界面交互
- ✅ 完善的配置管理系统
- ✅ 全面的案例管理功能
- ✅ 灵活的模板标注系统

## 8. 开发规模评估

基于代码量分析，这是一个**中等规模**的桌面应用项目：

- **代码规模**: 11,322行有效代码
- **开发周期**: 估计3-6个月的开发工作量
- **技术栈**: Python + PySide6 + SQLite
- **应用类型**: 专业级桌面软件

## 9. 维护建议

1. **模块化重构**: 考虑将大型模块分解为更小的组件
2. **代码复用**: 提取通用UI组件库
3. **文档完善**: 为核心算法模块添加详细文档
4. **测试覆盖**: 增加单元测试和集成测试

---

**统计日期**: 2025年9月10日  
**项目版本**: v1.0 alpha  
**统计工具**: PowerShell + Git
